import { NextPage } from "next";
import { useEffect, useRef } from "react";
import CanvasDraw from "react-canvas-draw";
import Container from "../components/Container";

const tempdata = {
	lines: [
		{
			points: [
				{ x: 168.36470706151897, y: 111.00959268903544 },
				{ x: 168.36470706151897, y: 111.00959268903544 },
				{ x: 168.36470706151897, y: 111.00959268903544 },
				{ x: 165.52575756487337, y: 112.46160857959192 },
				{ x: 159.95982417699304, y: 118.73052939109871 },
				{ x: 154.69837270531394, y: 126.52768382237176 },
				{ x: 150.4809659132691, y: 134.39653368949 },
				{ x: 145.69380698822255, y: 141.52461022538972 },
				{ x: 143.1756573979697, y: 148.25838214931687 },
				{ x: 138.631032289817, y: 155.48380182523576 },
				{ x: 136.8613444741064, y: 163.1638454609179 },
				{ x: 133.7455395914394, y: 167.56030514554698 },
				{ x: 132.88190649733087, y: 171.16867506445215 },
				{ x: 131.89711608528074, y: 175.17236572600487 },
				{ x: 131.6341222627365, y: 177.12243589136966 },
				{ x: 131.4522060755535, y: 180.10464448754752 },
				{ x: 131.710711133047, y: 181.17044790950763 },
				{ x: 132.45571234766064, y: 183.24688074084372 },
				{ x: 134.84171904423292, y: 186.56937756622466 },
				{ x: 138.46167489225084, y: 189.90571991781553 },
				{ x: 144.99337691159207, y: 192.63587631872795 },
				{ x: 155.8065242175645, y: 193.41934233257038 },
				{ x: 167.80018199652605, y: 193.56884555038306 },
				{ x: 181.79999225118883, y: 193.59528476043607 },
				{ x: 197.83212467440748, y: 190.99957040127634 },
				{ x: 210.89536549810816, y: 187.28395903980538 },
				{ x: 224.89605865999422, y: 183.28639136241648 },
				{ x: 235.99852530511598, y: 178.57636178512277 },
				{ x: 247.0195876060788, y: 173.62459137943574 },
				{ x: 254.4089077928056, y: 167.2351869598685 },
				{ x: 261.1883871915964, y: 162.9383419732748 },
				{ x: 266.6776885465015, y: 156.50214835763643 },
				{ x: 270.7210870352134, y: 151.53832300153812 },
				{ x: 274.16015250095523, y: 144.8250399250744 },
				{ x: 275.59004618981885, y: 139.99708409976793 },
				{ x: 276.0893735265465, y: 134.09111863224237 },
				{ x: 276.2379966504185, y: 128.0992374049852 },
				{ x: 276.27614331046027, y: 124.09989238906022 },
				{ x: 276.29081673942295, y: 120.0999892818144 },
				{ x: 275.0321225463628, y: 115.9903991052776 },
				{ x: 273.28277838969314, y: 111.89872806212439 },
				{ x: 269.85103750087063, y: 107.56068068223017 },
				{ x: 264.2622807045642, y: 103.14900788824744 },
				{ x: 254.4928657333634, y: 97.80054195826156 },
				{ x: 242.52947667883592, y: 91.73110261035966 },
				{ x: 226.7381654196894, y: 88.15253651947368 },
				{ x: 208.74018427333243, y: 84.14355107609897 },
				{ x: 190.78085358843887, y: 81.90872102843252 },
				{ x: 178.7994198716113, y: 81.65329103809007 },
				{ x: 168.79996507694023, y: 81.61066347780078 },
				{ x: 159.79998671943375, y: 81.60232292759396 },
				{ x: 154.7999876736871, y: 81.6007783782821 },
				{ x: 150.79998777532353, y: 81.60030313227531 },
				{ x: 148.74048955105465, y: 82.05783346608398 },
				{ x: 145.70522375663413, y: 82.91821437645325 },
				{ x: 143.63557040964454, y: 83.70834818666529 },
				{ x: 141.59138131420497, y: 84.60024826741898 },
				{ x: 139.5660305949879, y: 85.54404681480356 },
				{ x: 139.151496196718, y: 85.92014996954286 },
				{ x: 138.45399815148747, y: 86.33105402585703 },
				{ x: 138.45399815148747, y: 86.33105402585703 },
			],
			brushColor: "#444",
			brushRadius: 4,
		},
		{
			points: [
				{ x: 238.12755250325017, y: 143.30588043351008 },
				{ x: 238.12755250325017, y: 143.30588043351008 },
				{ x: 238.12755250325017, y: 143.30588043351008 },
				{ x: 235.77368437778435, y: 142.96170377598753 },
				{ x: 230.547785572333, y: 145.50574601419262 },
				{ x: 226.0896076493055, y: 149.8543655993438 },
				{ x: 220.18985436161347, y: 154.96342297005765 },
				{ x: 215.70853998256285, y: 161.53458103123882 },
				{ x: 211.58087667268566, y: 168.45307255125613 },
				{ x: 207.37032987010042, y: 177.34072129678555 },
				{ x: 202.57306022223338, y: 185.44842840567475 },
				{ x: 199.07250833369258, y: 196.22235768245758 },
				{ x: 195.97852785141708, y: 207.1938507907644 },
				{ x: 193.82759114787302, y: 217.1563132627736 },
				{ x: 192.60460418065654, y: 227.11863372993844 },
				{ x: 191.60877995458011, y: 235.1191499204757 },
				{ x: 191.37361208035043, y: 243.10109044581375 },
				{ x: 191.32453158788778, y: 248.10012658599263 },
				{ x: 191.30942782177092, y: 252.1000239264079 },
				{ x: 191.85686126797933, y: 255.1395917313314 },
				{ x: 193.41568645924147, y: 259.26162821464305 },
				{ x: 194.91587978278227, y: 261.5181211364395 },
				{ x: 198.30779456307016, y: 264.0896531200226 },
				{ x: 202.45978315245569, y: 267.90777477150624 },
				{ x: 209.8886102123644, y: 269.9402651211909 },
				{ x: 217.8777781298707, y: 271.98121668214964 },
				{ x: 226.82472255334213, y: 273.2492041743646 },
				{ x: 233.80169940378792, y: 273.5075121875844 },
				{ x: 241.84026051500433, y: 272.0469308377135 },
				{ x: 249.8657107327451, y: 270.16947532486904 },
				{ x: 257.0500102756513, y: 266.6897772591102 },
				{ x: 262.25387047783, y: 263.03646143964323 },
				{ x: 266.4409805119381, y: 259.27155985050524 },
				{ x: 270.900368973626, y: 252.67149522019992 },
				{ x: 271.95587368418956, y: 245.07620994814133 },
				{ x: 272.9084426076056, y: 239.06915420920288 },
				{ x: 273.2146899980202, y: 230.09855053701625 },
				{ x: 272.51698217774594, y: 222.0905709866245 },
				{ x: 269.0996776319406, y: 211.96865469742843 },
				{ x: 266.23958803618774, y: 204.91671743273704 },
				{ x: 262.47104452004316, y: 197.80876732691073 },
				{ x: 257.6917122141986, y: 190.6768072820959 },
				{ x: 253.57675024188538, y: 183.74939616793773 },
				{ x: 248.949379322205, y: 178.4787044782644 },
				{ x: 243.04145985617086, y: 172.39368251053185 },
				{ x: 238.33741311252723, y: 169.04876352531613 },
				{ x: 235.78836817219968, y: 165.60866830675448 },
				{ x: 233.16458844735905, y: 163.26531820629012 },
				{ x: 230.29666088459587, y: 161.10443176308547 },
				{ x: 228.17971846943854, y: 159.2482210724861 },
				{ x: 226.3648265869557, y: 158.0094175958934 },
				{ x: 225.57133049586147, y: 157.64451667120557 },
				{ x: 224.4200064521439, y: 156.9249668141592 },
				{ x: 222.47724225239222, y: 155.82864885831484 },
				{ x: 222.04701752362604, y: 155.3882698201412 },
				{ x: 221.39515730987952, y: 154.96392131180679 },
				{ x: 219.67189427399106, y: 154.38998056214345 },
				{ x: 218.50814350450935, y: 153.77220418984348 },
				{ x: 218.50814350450935, y: 153.77220418984348 },
				{ x: 218.08220601628256, y: 153.35320267107105 },
				{ x: 217.41507974710316, y: 152.9328174275806 },
				{ x: 217.41507974710316, y: 152.9328174275806 },
			],
			brushColor: "#444",
			brushRadius: 4,
		},
		{
			points: [
				{ x: 217.81548747567112, y: 239.14740351798764 },
				{ x: 217.81548747567112, y: 239.14740351798764 },
				{ x: 218.86754043830103, y: 245.13769229625203 },
				{ x: 219.96086417244277, y: 253.12311386322713 },
				{ x: 222.4691902885394, y: 260.2420884826828 },
				{ x: 223.8648491844062, y: 268.13816646793043 },
				{ x: 225.67688259305092, y: 275.1789030677414 },
				{ x: 226.82683983246773, y: 281.1451881861389 },
				{ x: 227.87085877604238, y: 287.1371118128828 },
				{ x: 228.13435528397127, y: 291.10549896342496 },
				{ x: 228.22465924273672, y: 294.1011412393183 },
				{ x: 228.26574368760063, y: 297.10024064626816 },
				{ x: 228.28442192845566, y: 300.1000545632129 },
				{ x: 228.29134004907203, y: 302.10002106025524 },
				{ x: 228.29518348370692, y: 304.1000107197974 },
				{ x: 228.29655614220283, y: 305.10000845876215 },
				{ x: 227.98461120231906, y: 306.1955746140842 },
				{ x: 227.7928648167876, y: 307.1490731710608 },
				{ x: 227.7928648167876, y: 307.1490731710608 },
			],
			brushColor: "#444",
			brushRadius: 4,
		},
		{
			points: [
				{ x: 217.7239074112687, y: 313.54514530029303 },
				{ x: 217.7239074112687, y: 313.54514530029303 },
				{ x: 215.70201246421632, y: 316.53014455712827 },
				{ x: 211.8178434630325, y: 321.6135232405502 },
				{ x: 205.90411284641812, y: 328.6825122148954 },
				{ x: 199.9221106990498, y: 335.6977134663099 },
				{ x: 192.8507654895271, y: 344.63911637284303 },
				{ x: 186.9109219160491, y: 351.68822911571203 },
				{ x: 180.92355333583282, y: 358.6989445768878 },
				{ x: 176.8792509071598, y: 363.6619844276421 },
				{ x: 173.99991060978272, y: 366.7669042468597 },
				{ x: 172.0362304426157, y: 368.8012672504447 },
				{ x: 169.83583551710723, y: 371.62740077850543 },
				{ x: 169.44753888958036, y: 372.37894183594807 },
				{ x: 169.44753888958036, y: 372.37894183594807 },
				{ x: 168.68681648377594, y: 373.51993250329036 },
				{ x: 167.83132542566142, y: 374.62389754002544 },
				{ x: 167.44381117742554, y: 375.3770198090977 },
				{ x: 167.44381117742554, y: 375.3770198090977 },
				{ x: 167.44381117742554, y: 375.3770198090977 },
				{ x: 168.50755549015904, y: 374.3427586504494 },
				{ x: 171.69818483583538, y: 370.51944020931836 },
				{ x: 176.69920132783702, y: 364.5202880341318 },
				{ x: 180.85656033565007, y: 358.6412109377884 },
				{ x: 186.7110085137026, y: 351.53006953513204 },
				{ x: 192.78194303634297, y: 343.58634447269674 },
				{ x: 197.93355134939262, y: 335.6935321830444 },
				{ x: 202.63014784538916, y: 330.4605529450295 },
				{ x: 206.95250698612162, y: 323.70578279518514 },
				{ x: 211.4982497463334, y: 319.33313622307 },
				{ x: 214.6947711485828, y: 315.5165862673977 },
				{ x: 216.9991148265801, y: 311.7348900641372 },
				{ x: 219.4977856321837, y: 309.33265360709555 },
				{ x: 221.51597848366566, y: 307.35138007395136 },
				{ x: 223.74254293613163, y: 304.5556046098332 },
				{ x: 225.10918902374604, y: 303.8043319534301 },
				{ x: 226.24309380906132, y: 303.0209871515826 },
				{ x: 226.6812961994874, y: 302.50521935278533 },
				{ x: 226.6812961994874, y: 302.50521935278533 },
				{ x: 227.2784084348012, y: 302.0707939531496 },
				{ x: 228.36465092566766, y: 301.18255822274114 },
				{ x: 228.36465092566766, y: 301.18255822274114 },
				{ x: 228.36465092566766, y: 301.18255822274114 },
				{ x: 228.82489191421448, y: 301.24801123001083 },
				{ x: 228.82489191421448, y: 301.24801123001083 },
				{ x: 229.97010493622383, y: 301.6935592634604 },
				{ x: 230.36516741894258, y: 302.0168225638547 },
				{ x: 231.71588323002285, y: 303.6659397309074 },
				{ x: 234.19435923067329, y: 305.25229383539397 },
				{ x: 235.84685519176807, y: 307.5656989380837 },
				{ x: 238.23400500936822, y: 309.1922720597892 },
				{ x: 240.38394174881907, y: 310.99415195176385 },
				{ x: 243.2841227016607, y: 313.1213959677308 },
				{ x: 246.4351730369827, y: 315.93493375498036 },
				{ x: 249.30323558552226, y: 318.09568545217246 },
				{ x: 251.42021646118351, y: 319.9518375016431 },
				{ x: 253.47869591224546, y: 321.8874361384598 },
				{ x: 256.51217788675166, y: 324.8525119721286 },
				{ x: 258.52278827764314, y: 326.8417223144968 },
				{ x: 258.945928882362, y: 327.49845323322984 },
				{ x: 260.92658271699446, y: 330.5110449987346 },
				{ x: 262.7090269923598, y: 332.67157572340705 },
				{ x: 263.9235496384028, y: 334.5130422785644 },
				{ x: 264.7749649004991, y: 335.619020193055 },
				{ x: 265.9609454276127, y: 337.4888534458942 },
				{ x: 266.31164186312515, y: 338.30366720802095 },
				{ x: 267.00871771405684, y: 339.4593002425186 },
				{ x: 267.00871771405684, y: 339.4593002425186 },
				{ x: 267.5557184909127, y: 341.2133634394335 },
				{ x: 267.5557184909127, y: 341.2133634394335 },
			],
			brushColor: "#444",
			brushRadius: 4,
		},
		{
			points: [
				{ x: 201.79998779220972, y: 289.600067708777 },
				{ x: 201.79998779220972, y: 289.600067708777 },
				{ x: 201.79998779372778, y: 289.6000677087769 },
				{ x: 209.8112477333749, y: 290.36299784253544 },
				{ x: 217.85497766024906, y: 292.07854138668614 },
				{ x: 222.85061147588914, y: 293.0994507545986 },
				{ x: 226.80748366418118, y: 293.40655541735265 },
				{ x: 229.85699408738756, y: 294.0691749114303 },
				{ x: 233.86769906224964, y: 295.0221034037323 },
				{ x: 235.82097084924274, y: 295.2767801876003 },
				{ x: 237.80647211726625, y: 295.42006284849913 },
				{ x: 238.8032975236775, y: 295.47140711741434 },
				{ x: 240.80100951522218, y: 295.528538856816 },
				{ x: 241.80050911461944, y: 295.5489538119189 },
				{ x: 241.80050911461944, y: 295.5489538119189 },
				{ x: 242.80025378245875, y: 295.56353862897197 },
				{ x: 243.80012350424965, y: 295.573957341799 },
				{ x: 244.80005703403185, y: 295.58139963901425 },
				{ x: 245.8000231202015, y: 295.5867156966069 },
				{ x: 245.97456207540543, y: 295.5178270185612 },
				{ x: 247.1343282433287, y: 294.84897316275016 },
				{ x: 247.1343282433287, y: 294.84897316275016 },
				{ x: 247.97444036197282, y: 294.51751858091757 },
				{ x: 249.1342215360127, y: 293.84878811821255 },
				{ x: 249.9743834003869, y: 293.5173741916918 },
				{ x: 251.42063798788152, y: 292.24865534156436 },
				{ x: 253.2353210611463, y: 291.0096696401461 },
				{ x: 254.6287906029021, y: 289.4593339261207 },
				{ x: 255.5933417027729, y: 288.4268501370388 },
				{ x: 257.31211520576, y: 287.1160412538416 },
				{ x: 258.3876883290236, y: 286.2103199736028 },
				{ x: 261.09232042719094, y: 284.77312366031873 },
				{ x: 262.52267502917346, y: 283.3581754183572 },
				{ x: 263.52611795006635, y: 282.361649024326 },
				{ x: 265.034645813972, y: 281.6574680263267 },
				{ x: 267.2680878735662, y: 280.0565028311233 },
				{ x: 267.7065632622851, y: 279.52640125119837 },
				{ x: 268.293073057328, y: 279.0907419097094 },
				{ x: 270.1767628311545, y: 277.91982266710653 },
				{ x: 270.6120908386553, y: 277.44418718779656 },
				{ x: 271.0241079131054, y: 276.74992017904515 },
				{ x: 271.0241079131054, y: 276.74992017904515 },
			],
			brushColor: "#444",
			brushRadius: 4,
		},
		{
			points: [
				{ x: 222.50003242492676, y: 39.399993896484375 },
				{ x: 222.50003242492676, y: 39.399993896484375 },
				{ x: 224.5464483924638, y: 53.7251528774999 },
				{ x: 227.3485110504142, y: 62.61563854391485 },
				{ x: 229.14786589366517, y: 70.56174759662495 },
				{ x: 231.9930713302781, y: 77.87033643010423 },
				{ x: 234.8521355831094, y: 82.8337159983311 },
				{ x: 236.75398060991913, y: 87.48590506790833 },
				{ x: 238.80306868938192, y: 90.86273007061058 },
				{ x: 241.68916892775346, y: 94.288167826596 },
				{ x: 246.373231219731, y: 99.19217272958021 },
				{ x: 249.6828192687325, y: 103.0935753754563 },
				{ x: 254.2605688736062, y: 107.30696844169778 },
				{ x: 260.2610530608627, y: 110.28775575747291 },
				{ x: 265.90957807330057, y: 113.39502203111554 },
				{ x: 270.7849198612499, y: 116.4671905331049 },
				{ x: 275.5000617127558, y: 119.01247680686942 },
				{ x: 278.81767174906327, y: 121.21656647628153 },
				{ x: 282.2117559976065, y: 124.16157493025943 },
				{ x: 284.50500099746387, y: 125.89341746183445 },
				{ x: 285.7943160134575, y: 126.43375087092646 },
				{ x: 287.610654828622, y: 127.62719278775737 },
				{ x: 287.96718251174315, y: 127.99796323019606 },
				{ x: 288.75625042418426, y: 128.8086062207413 },
				{ x: 289.3568507629414, y: 129.97670324866186 },
				{ x: 289.4765176292643, y: 131.3100118587052 },
				{ x: 288.47446536150676, y: 133.1931149522276 },
				{ x: 285.82146216965924, y: 135.98709154990604 },
				{ x: 280.6668856999512, y: 138.95315908577012 },
				{ x: 273.62972120814914, y: 141.6930201359997 },
				{ x: 265.6810256147638, y: 144.23776117677764 },
				{ x: 256.17901316975343, y: 145.47675696875456 },
				{ x: 245.79921790137732, y: 145.737276110291 },
				{ x: 236.1800616587531, y: 144.5151282312446 },
				{ x: 228.1859679637589, y: 143.664595685718 },
				{ x: 221.62922628452043, y: 141.10817283812403 },
				{ x: 216.7677750761886, y: 138.85230684232778 },
				{ x: 211.0993320925569, y: 135.78871494783024 },
				{ x: 205.99958482789484, y: 131.42530545937308 },
				{ x: 202.45416894113123, y: 126.95821490624603 },
				{ x: 198.3803916993899, y: 121.41453268075753 },
				{ x: 195.5469518020013, y: 115.27024868685453 },
				{ x: 192.89546333879133, y: 107.3700892705601 },
				{ x: 190.34480257671012, y: 97.81539333526396 },
				{ x: 189.19846162590613, y: 88.28212274126801 },
				{ x: 188.96173484581905, y: 78.69926500769076 },
				{ x: 188.9119612819831, y: 68.29997441706035 },
				{ x: 192.2012544241875, y: 57.00035758428348 },
				{ x: 194.0581338716612, y: 46.66064742351942 },
				{ x: 198.303491229626, y: 36.89281232885543 },
				{ x: 202.20824881924642, y: 28.84902111704442 },
				{ x: 206.18769566995155, y: 20.83895779997874 },
				{ x: 209.383476818661, y: 14.43681876507701 },
				{ x: 211.6721377517764, y: 10.377709294323186 },
				{ x: 213.74723171146786, y: 7.7593281996195405 },
				{ x: 214.72142217319995, y: 6.285557960111591 },
				{ x: 215.62784119173415, y: 4.752157120256282 },
				{ x: 215.9660052147899, y: 4.400943629704114 },
				{ x: 216.31322431996222, y: 3.880128016147051 },
				{ x: 216.98823992379224, y: 2.9911010605977246 },
				{ x: 217.30935335283684, y: 2.39825772272941 },
				{ x: 217.62190468151093, y: 2.0531121661089644 },
				{ x: 217.62190468151093, y: 2.0531121661089644 },
			],
			brushColor: "#444",
			brushRadius: 4,
		},
	],
	width: 375,
	height: 400,
};

const LeaveAMessagePage: NextPage = () => {
	const canvasRef = useRef<CanvasDraw>(null);

	useEffect(() => {
		if (canvasRef.current) {
			const canRef = canvasRef.current as any;

			console.log(canRef.handleDrawMove);
			const canvas = canRef.canvas.interface as HTMLCanvasElement;

			canvas.onmousedown = (e: MouseEvent) => {
				console.log(e);
			};

			canvas.onmousemove = (e: MouseEvent) => {
				console.log(e);
			};
		}
	}, [canvasRef]);

	const handleSubmit = () => {
		if (canvasRef.current) {
			const canvas = canvasRef.current;

			console.log(canvas);

			const saveData = canvas.getSaveData();
		}
	};

	return (
		<div>
			<Container>
				<div className="text-center">
					<h1 className="font-bold text-3xl my-4">Canvas&trade;</h1>
					<p>
						Hi, my name is Nabil. And you are here because you can
						leave a message for me but in a pretty unconventional
						way. It&apos;s by drawing on a canvas! Go ahead! Draw,
						complete the captcha and submit!
					</p>

					<p>You can see all the other drawings here:</p>
				</div>
			</Container>

			<div className="my-10">
				<CanvasDraw
					ref={canvasRef}
					onChange={() => console.log("changed")}
					className="mx-auto"
					catenaryColor="#0a0302"
					lazyRadius={2}
					brushRadius={4}
					saveData={JSON.stringify(tempdata)}
				/>
			</div>

			<button onClick={handleSubmit}>Submit</button>
		</div>
	);
};

export default LeaveAMessagePage;
